<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Search</title>
</head>
<body>
    <h1>Spotify Song Search</h1>
    
    <label for="searchInput">Search for a song:</label>
    <input type="text" id="searchInput" placeholder="Enter song title">
    <button onclick="searchSpotify()">Search</button>

    <div id="results"></div>

    <script>
        function searchSpotify() {
            var searchQuery = document.getElementById("searchInput").value;
            
            // Effettua la richiesta di ricerca all'API di Spotify
            fetch(`https://api.spotify.com/v1/search?q=${searchQuery}&type=track`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    // Aggiungi qui eventuali altre intestazioni necessarie
                },
            })
            .then(response => response.json())
            .then(data => {
                displayResults(data.tracks.items);
            })
            .catch(error => {
                console.error('Error fetching data from Spotify API:', error);
            });
        }

        function displayResults(tracks) {
            var resultsContainer = document.getElementById("results");
            resultsContainer.innerHTML = "";

            if (tracks.length === 0) {
                resultsContainer.innerHTML = "<p>No results found.</p>";
                return;
            }

            tracks.forEach(track => {
                var trackName = track.name;
                var artistName = track.artists.map(artist => artist.name).join(', ');
                var previewUrl = track.preview_url;

                var resultItem = document.createElement("div");
                resultItem.innerHTML = `
                    <p><strong>${trackName}</strong> by ${artistName}</p>
                    ${previewUrl ? `<audio controls><source src="${previewUrl}" type="audio/mp3"></audio>` : "<p>No preview available</p>"}
                    <hr>
                `;

                resultsContainer.appendChild(resultItem);
            });
        }
    </script>
</body>
</html>
